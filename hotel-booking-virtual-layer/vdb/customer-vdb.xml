<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<vdb name="customer" version="1">

  <description>Customer VDB</description>
      <model name="Monolith" visible="false">
        <property name="importer.useFullSchemaName" value="false"/>
        <property name="importer.TableTypes" value="TABLE" />
        <property name="importer.importKeys" value="false"/>
        <property name="importer.schemapattern" value="public"/>
        <source name="monolithdb" translator-name="postgresql" connection-jndi-name="java:/monolithdb"/>
    </model>
    <model name="DataServiceLayer" type="VIRTUAL" visible="true">
        <metadata type="DDL"><![CDATA[

        CREATE VIEW customer(
            id integer NOT NULL,
            email string(256) NOT NULL,
            country string(256) NOT NULL,
            CONSTRAINT customer_pk PRIMARY KEY(id)
        )
        AS
            SELECT
                c.id,
                c.email,
                co.name as country
            FROM
                Monolith.customer c
                inner join Monolith.city as ci on (c.city_id = ci.id)
                inner join Monolith.country as co on (ci.country_id = co.id);
        ]]></metadata>
    </model>
</vdb>
