<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<vdb name="hotel" version="1">

  <description>Hotel VDB</description>
      <model name="Monolith" visible="false">
        <property name="importer.useFullSchemaName" value="false"/>
        <property name="importer.TableTypes" value="TABLE" />
        <property name="importer.importKeys" value="false"/>
        <property name="importer.schemapattern" value="public"/>
        <source name="monolithdb" translator-name="postgresql" connection-jndi-name="java:/monolithdb"/>
    </model>
    <model name="DataServiceLayer" type="VIRTUAL" visible="true">
        <metadata type="DDL"><![CDATA[

        CREATE VIEW hotel(
            id integer NOT NULL,
            name string(256) NOT NULL,
            stars decimal NOT NULL,
            email string(256) NOT NULL,
            url string(256) NOT NULL,
            address string(256) NOT NULL,
            city string(256) NOT NULL,
            postal_code string(256) NOT NULL,
            country string(256) NOT NULL,
            CONSTRAINT hotel_pk PRIMARY KEY(id)
        )
        AS
            SELECT
                h.id,
                h.name,
                h.stars,
                h.email,
                h.url,
                h.address_line_1,
                c.name,
                c.postal_code,
                y.name
            FROM
                Monolith.hotel as h inner join Monolith.city as c on (h.city_id = c.id)
                                    inner join Monolith.country as y on (c.country_id = y.id);
        ]]></metadata>
    </model>
</vdb>
